"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[509],{6429:(e,t,i)=>{i.d(t,{A:()=>d});var r=i(6867),s=i(8119),a=i(6077),n=i(3675),o=i(5432);class d extends r.A{describe(){return this.deepExtend(super.describe(),{id:"woo",name:"WOO X",countries:["KY"],rateLimit:100,version:"v1",certified:!0,pro:!0,hostname:"woox.io",has:{CORS:void 0,spot:!0,margin:!0,swap:!0,future:!1,option:!1,addMargin:!0,cancelAllOrders:!0,cancelAllOrdersAfter:!0,cancelOrder:!0,cancelWithdraw:!1,closeAllPositions:!1,closePosition:!1,createConvertTrade:!0,createDepositAddress:!1,createMarketBuyOrderWithCost:!0,createMarketOrder:!1,createMarketOrderWithCost:!1,createMarketSellOrderWithCost:!0,createOrder:!0,createOrderWithTakeProfitAndStopLoss:!0,createReduceOnlyOrder:!0,createStopLimitOrder:!1,createStopLossOrder:!0,createStopMarketOrder:!1,createStopOrder:!1,createTakeProfitOrder:!0,createTrailingAmountOrder:!0,createTrailingPercentOrder:!0,createTriggerOrder:!0,fetchAccounts:!0,fetchBalance:!0,fetchCanceledOrders:!1,fetchClosedOrder:!1,fetchClosedOrders:!0,fetchConvertCurrencies:!0,fetchConvertQuote:!0,fetchConvertTrade:!0,fetchConvertTradeHistory:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDepositAddresses:!1,fetchDepositAddressesByNetwork:!1,fetchDeposits:!0,fetchDepositsWithdrawals:!0,fetchFundingHistory:!0,fetchFundingInterval:!0,fetchFundingIntervals:!1,fetchFundingRate:!0,fetchFundingRateHistory:!0,fetchFundingRates:!0,fetchIndexOHLCV:!1,fetchLedger:!0,fetchLeverage:!0,fetchMarginAdjustmentHistory:!1,fetchMarginMode:!1,fetchMarkets:!0,fetchMarkOHLCV:!1,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenInterestHistory:!1,fetchOpenOrder:!1,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchOrderTrades:!0,fetchPosition:!0,fetchPositionHistory:!1,fetchPositionMode:!1,fetchPositions:!0,fetchPositionsHistory:!1,fetchPremiumIndexOHLCV:!1,fetchStatus:!0,fetchTicker:!1,fetchTickers:!1,fetchTime:!0,fetchTrades:!0,fetchTradingFee:!1,fetchTradingFees:!0,fetchTransactions:"emulated",fetchTransfers:!0,fetchWithdrawals:!0,reduceMargin:!1,sandbox:!0,setLeverage:!0,setMargin:!1,setPositionMode:!0,transfer:!0,withdraw:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","4h":"4h","12h":"12h","1d":"1d","1w":"1w","1M":"1mon","1y":"1y"},urls:{logo:"https://user-images.githubusercontent.com/1294454/150730761-1a00e5e0-d28c-480f-9e65-089ce3e6ef3b.jpg",api:{pub:"https://api-pub.woox.io",public:"https://api.{hostname}",private:"https://api.{hostname}"},test:{pub:"https://api-pub.staging.woox.io",public:"https://api.staging.woox.io",private:"https://api.staging.woox.io"},www:"https://woox.io/",doc:["https://docs.woox.io/"],fees:["https://support.woox.io/hc/en-001/articles/4404611795353--Trading-Fees"],referral:{url:"https://woox.io/register?ref=DIJT0CNL",discount:.35}},api:{v1:{pub:{get:{"hist/kline":10,"hist/trades":10}},public:{get:{info:1,"info/{symbol}":1,system_info:1,market_trades:1,token:1,token_network:1,funding_rates:1,"funding_rate/{symbol}":1,funding_rate_history:1,futures:1,"futures/{symbol}":1,"orderbook/{symbol}":1,kline:1}},private:{get:{"client/token":1,"order/{oid}":1,"client/order/{client_order_id}":1,orders:1,"client/trade/{tid}":1,"order/{oid}/trades":1,"client/trades":1,"client/hist_trades":1,"staking/yield_history":1,"client/holding":1,"asset/deposit":10,"asset/history":60,"sub_account/all":60,"sub_account/assets":60,"sub_account/asset_detail":60,"sub_account/ip_restriction":10,"asset/main_sub_transfer_history":30,token_interest:60,"token_interest/{token}":60,"interest/history":60,"interest/repay":60,"funding_fee/history":30,positions:3.33,"position/{symbol}":3.33,"client/transaction_history":60,"client/futures_leverage":60},post:{order:1,"order/cancel_all_after":1,"asset/main_sub_transfer":30,"asset/ltv":30,"asset/withdraw":30,"asset/internal_withdraw":30,"interest/repay":60,"client/account_mode":120,"client/position_mode":5,"client/leverage":120,"client/futures_leverage":30,"client/isolated_margin":30},delete:{order:1,"client/order":1,orders:1,"asset/withdraw":120}}},v2:{private:{get:{"client/holding":1}}},v3:{public:{get:{insuranceFund:3}},private:{get:{"algo/order/{oid}":1,"algo/orders":1,balances:1,accountinfo:60,positions:3.33,buypower:1,referrals:60,referral_rewards:60,"convert/exchangeInfo":1,"convert/assetInfo":1,"convert/rfq":60,"convert/trade":1,"convert/trades":1},post:{"algo/order":5,"convert/rft":60},put:{"order/{oid}":2,"order/client/{client_order_id}":2,"algo/order/{oid}":2,"algo/order/client/{client_order_id}":2},delete:{"algo/order/{order_id}":1,"algo/orders/pending":1,"algo/orders/pending/{symbol}":1,"orders/pending":1}}}},fees:{trading:{tierBased:!0,percentage:!0,maker:this.parseNumber("0.0002"),taker:this.parseNumber("0.0005")}},options:{timeDifference:0,adjustForTimeDifference:!1,sandboxMode:!1,createMarketBuyOrderRequiresPrice:!0,"network-aliases-for-tokens":{HT:"ERC20",OMG:"ERC20",UATOM:"ATOM",ZRX:"ZRX"},networks:{TRX:"TRON",TRC20:"TRON",ERC20:"ETH",BEP20:"BSC"},defaultNetworkCodeForCurrencies:{},transfer:{fillResponseFromRequest:!0},brokerId:"bc830de7-50f3-460b-9ee0-f430f83f9dad"},features:{default:{sandbox:!0,createOrder:{marginMode:!0,triggerPrice:!0,triggerPriceType:{last:!0,mark:!0,index:!1},triggerDirection:!1,stopLossPrice:!1,takeProfitPrice:!1,attachedStopLossTakeProfit:void 0,timeInForce:{IOC:!0,FOK:!0,PO:!0,GTD:!0},hedged:!1,trailing:!0,leverage:!1,marketBuyByCost:!0,marketBuyRequiresPrice:!1,selfTradePrevention:!1,iceberg:!0},createOrders:void 0,fetchMyTrades:{marginMode:!1,limit:500,daysBack:90,untilDays:1e4},fetchOrder:{marginMode:!1,trigger:!0,trailing:!1},fetchOpenOrders:{marginMode:!1,limit:500,trigger:!0,trailing:!0},fetchOrders:{marginMode:!1,limit:500,daysBack:void 0,untilDays:1e5,trigger:!0,trailing:!0},fetchClosedOrders:{marginMode:!1,limit:500,daysBack:void 0,daysBackCanceled:void 0,untilDays:1e5,trigger:!0,trailing:!0},fetchOHLCV:{limit:1e3}},spot:{extends:"default"},forSwap:{extends:"default",createOrder:{hedged:!0}},swap:{linear:{extends:"forSwap"},inverse:void 0},future:{linear:void 0,inverse:void 0}},commonCurrencies:{},exceptions:{exact:{"-1000":s.OperationFailed,"-1001":s.AuthenticationError,"-1002":s.AuthenticationError,"-1003":s.RateLimitExceeded,"-1004":s.BadRequest,"-1005":s.BadRequest,"-1006":s.BadRequest,"-1007":s.BadRequest,"-1008":s.InvalidOrder,"-1009":s.BadRequest,"-1012":s.BadRequest,"-1101":s.InvalidOrder,"-1102":s.InvalidOrder,"-1103":s.InvalidOrder,"-1104":s.InvalidOrder,"-1105":s.InvalidOrder},broad:{"Can not place":s.ExchangeError,maintenance:s.OnMaintenance,"symbol must not be blank":s.BadRequest,"The token is not supported":s.BadRequest,"Your order and symbol are not valid or already canceled":s.BadRequest,"Insufficient WOO. Please enable margin trading for leverage trading":s.BadRequest}},precisionMode:n.kb})}async fetchStatus(e={}){let t=await this.v1PublicGetSystemInfo(e),i=this.safeDict(t,"data",{}),r=this.safeString(i,"status");return{status:r=void 0===r?"error":"0"===r?"ok":"maintenance",updated:void 0,eta:void 0,url:void 0,info:t}}async fetchTime(e={}){let t=await this.v1PublicGetSystemInfo(e);return this.safeInteger(t,"timestamp")}async fetchMarkets(e={}){this.options.adjustForTimeDifference&&await this.loadTimeDifference();let t=await this.v1PublicGetInfo(e),i=this.safeList(t,"rows",[]);return this.parseMarkets(i)}parseMarket(e){let t,i,r,s,a;let n=this.safeString(e,"symbol"),o=n.split("_"),d=this.safeString(o,0),h=!1,c=!1;"SPOT"===d?(h=!0,t="spot"):"PERP"===d&&(c=!0,t="swap");let l=this.safeString(o,1),f=this.safeString(o,2),u=this.safeCurrencyCode(l),g=this.safeCurrencyCode(f),m=u+"/"+g,p=!0,v=c;return v&&(p=!1,i=this.safeString(o,2),m=u+"/"+g+":"+(r=this.safeCurrencyCode(i)),s=this.parseNumber("1"),a=!0),{id:n,symbol:m,base:u,quote:g,settle:r,baseId:l,quoteId:f,settleId:i,type:t,spot:h,margin:p,swap:c,future:!1,option:!1,active:"1"===this.safeString(e,"is_trading"),contract:v,linear:a,inverse:void 0,contractSize:s,expiry:void 0,expiryDatetime:void 0,strike:void 0,optionType:void 0,precision:{amount:this.safeNumber(e,"base_tick"),price:this.safeNumber(e,"quote_tick")},limits:{leverage:{min:void 0,max:void 0},amount:{min:this.safeNumber(e,"base_min"),max:this.safeNumber(e,"base_max")},price:{min:this.safeNumber(e,"quote_min"),max:this.safeNumber(e,"quote_max")},cost:{min:this.safeNumber(e,"min_notional"),max:void 0}},created:this.safeTimestamp(e,"created_time"),info:e}}async fetchTrades(e,t,i,r={}){await this.loadMarkets();let s=this.market(e),a={symbol:s.id};void 0!==i&&(a.limit=i);let n=await this.v1PublicGetMarketTrades(this.extend(a,r)),o=this.safeList(n,"rows",[]);return this.parseTrades(o,s,t,i)}parseTrade(e,t){let i;let r="id"in e,s=this.safeTimestamp(e,"executed_timestamp"),n=this.safeString(e,"symbol"),o=(t=this.safeMarket(n,t)).symbol,d=this.safeString(e,"executed_price"),h=this.safeString(e,"executed_quantity"),c=this.safeString(e,"order_id"),l=this.parseTokenAndFeeTemp(e,"fee_asset","fee"),f=this.safeString(l,"cost");void 0!==f&&(l.cost=f);let u=a.Y.stringMul(d,h),g=this.safeStringLower(e,"side"),m=this.safeString(e,"id");return r&&(i="1"===this.safeString(e,"is_maker")?"maker":"taker"),this.safeTrade({id:m,timestamp:s,datetime:this.iso8601(s),symbol:o,side:g,price:d,amount:h,cost:u,order:c,takerOrMaker:i,type:void 0,fee:l,info:e},t)}parseTokenAndFeeTemp(e,t,i){let r;let s=this.safeString(e,i);if(void 0!==s){let i=this.safeString(e,t);r={cost:s,currency:this.safeCurrencyCode(i)}}return r}async fetchTradingFees(e={}){await this.loadMarkets();let t=await this.v3PrivateGetAccountinfo(e),i=this.safeDict(t,"data",{}),r=this.safeString(i,"makerFeeRate"),s=this.safeString(i,"takerFeeRate"),n={};for(let e=0;e<this.symbols.length;e++){let i=this.symbols[e];n[i]={info:t,symbol:i,maker:this.parseNumber(a.Y.stringDiv(r,"10000")),taker:this.parseNumber(a.Y.stringDiv(s,"10000")),percentage:!0,tierBased:!0}}return n}async fetchCurrencies(e={}){let t={},i=await this.v1PublicGetToken(e),r=this.safeList(i,"rows",[]),s=this.groupBy(r,"balance_token"),n=Object.keys(s);for(let e=0;e<n.length;e++){let i,r;let o=n[e],d=s[o],h=this.safeCurrencyCode(o),c={};for(let e=0;e<d.length;e++){let t=d[e];i=this.safeString(t,"fullname");let s=this.safeString(t,"token"),n=s.split("_")[0],o=this.parsePrecision(this.safeString(t,"decimals"));void 0!==o&&(r=void 0===r?o:a.Y.stringMin(o,r)),c[n]={id:s,network:n,limits:{withdraw:{min:void 0,max:void 0},deposit:{min:void 0,max:void 0}},active:void 0,deposit:void 0,withdraw:void 0,fee:void 0,precision:this.parseNumber(o),info:t}}t[h]={id:o,name:i,code:h,precision:this.parseNumber(r),active:void 0,fee:void 0,networks:c,deposit:void 0,withdraw:void 0,limits:{deposit:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}},info:d}}return t}async createMarketBuyOrderWithCost(e,t,i={}){if(await this.loadMarkets(),!this.market(e).spot)throw new s.NotSupported(this.id+" createMarketBuyOrderWithCost() supports spot orders only");return await this.createOrder(e,"market","buy",t,1,i)}async createMarketSellOrderWithCost(e,t,i={}){if(await this.loadMarkets(),!this.market(e).spot)throw new s.NotSupported(this.id+" createMarketSellOrderWithCost() supports spot orders only");return await this.createOrder(e,"market","sell",t,1,i)}async createTrailingAmountOrder(e,t,i,r,a,n,o,d={}){if(void 0===n)throw new s.ArgumentsRequired(this.id+" createTrailingAmountOrder() requires a trailingAmount argument");if(void 0===o)throw new s.ArgumentsRequired(this.id+" createTrailingAmountOrder() requires a trailingTriggerPrice argument");return d.trailingAmount=n,d.trailingTriggerPrice=o,await this.createOrder(e,t,i,r,a,d)}async createTrailingPercentOrder(e,t,i,r,a,n,o,d={}){if(void 0===n)throw new s.ArgumentsRequired(this.id+" createTrailingPercentOrder() requires a trailingPercent argument");if(void 0===o)throw new s.ArgumentsRequired(this.id+" createTrailingPercentOrder() requires a trailingTriggerPrice argument");return d.trailingPercent=n,d.trailingTriggerPrice=o,await this.createOrder(e,t,i,r,a,d)}async createOrder(e,t,i,r,n,o={}){let d,h;let c=this.safeBool2(o,"reduceOnly","reduce_only");o=this.omit(o,["reduceOnly","reduce_only"]);let l=t.toUpperCase();await this.loadMarkets();let f=this.market(e),u=i.toUpperCase(),g={symbol:f.id,side:u};[d,o]=this.handleMarginModeAndParams("createOrder",o),void 0!==d&&(g.margin_mode=this.encodeMarginMode(d));let m=this.safeString2(o,"triggerPrice","stopPrice"),p=this.safeValue(o,"stopLoss"),v=this.safeValue(o,"takeProfit"),y=this.safeString(o,"algoType"),w=this.safeString2(o,"trailingTriggerPrice","activatedPrice",this.numberToString(n)),O=this.safeString2(o,"trailingAmount","callbackValue"),P=this.safeString2(o,"trailingPercent","callbackRate"),k=void 0!==O,T=void 0!==P,b=k||T,_=b||void 0!==m||void 0!==p||void 0!==v||void 0!==this.safeValue(o,"childOrders"),S="MARKET"===l,C=this.safeStringLower(o,"timeInForce"),M=this.isPostOnly(S,void 0,o);if(g[_?"type":"order_type"]=l,_||(M?g.order_type="POST_ONLY":"fok"===C?g.order_type="FOK":"ioc"!==C||(g.order_type="IOC")),c&&(g[_?"reduceOnly":"reduce_only"]=c),S||void 0===n||(g[_?"price":"order_price"]=this.priceToPrecision(e,n)),S&&!_){let t=this.safeString2(o,"cost","order_amount");o=this.omit(o,["cost","order_amount"]);let i=void 0!==n;if(f.spot&&(i||void 0!==t)){let i;if(void 0!==t)i=this.costToPrecision(e,t);else{let t=this.numberToString(r),s=this.numberToString(n),o=a.Y.stringMul(t,s);i=this.costToPrecision(e,o)}g.order_amount=i}else g.order_quantity=this.amountToPrecision(e,r)}else"POSITIONAL_TP_SL"!==y&&(g[_?"quantity":"order_quantity"]=this.amountToPrecision(e,r));let x=this.safeStringN(o,["clOrdID","clientOrderId","client_order_id"]);if(void 0!==x&&(g[_?"clientOrderId":"client_order_id"]=x),b){if(void 0===w)throw new s.ArgumentsRequired(this.id+" createOrder() requires a trailingTriggerPrice parameter for trailing orders");if(g.activatedPrice=this.priceToPrecision(e,w),g.algoType="TRAILING_STOP",k)g.callbackValue=O;else if(T){let e=a.Y.stringDiv(P,"100");g.callbackRate=e}}else if(void 0!==m)"TRAILING_STOP"!==y&&(g.triggerPrice=this.priceToPrecision(e,m),g.algoType="STOP");else if(void 0!==p||void 0!==v){g.algoType="BRACKET";let t={symbol:f.id,reduceOnly:!1,algoType:"POSITIONAL_TP_SL",childOrders:[]},i="BUY"===u?"SELL":"BUY";if(void 0!==p){let r=this.safeString(p,"triggerPrice",p),s={side:i,algoType:"STOP_LOSS",triggerPrice:this.priceToPrecision(e,r),type:"CLOSE_POSITION",reduceOnly:!0};t.childOrders.push(s)}if(void 0!==v){let r=this.safeString(v,"triggerPrice",v),s={side:i,algoType:"TAKE_PROFIT",triggerPrice:this.priceToPrecision(e,r),type:"CLOSE_POSITION",reduceOnly:!0};t.childOrders.push(s)}g.childOrders=[t]}o=this.omit(o,["clOrdID","clientOrderId","client_order_id","postOnly","timeInForce","stopPrice","triggerPrice","stopLoss","takeProfit","trailingPercent","trailingAmount","trailingTriggerPrice"]),h=_?await this.v3PrivatePostAlgoOrder(this.extend(g,o)):await this.v1PrivatePostOrder(this.extend(g,o));let A=this.safeDict(h,"data");if(void 0!==A){let e=this.safeList(A,"rows",[]);return this.parseOrder(e[0],f)}let L=this.parseOrder(h,f);return L.type=t,L}encodeMarginMode(e){return this.safeString({cross:"CROSS",isolated:"ISOLATED"},e,e)}async editOrder(e,t,i,r,s,n,o={}){let d;await this.loadMarkets();let h=this.market(t),c={};void 0!==n&&(c.price=this.priceToPrecision(t,n)),void 0!==s&&(c.quantity=this.amountToPrecision(t,s));let l=this.safeString2(o,"clOrdID","clientOrderId"),f=this.safeString(o,"client_order_id",l),u=this.safeNumberN(o,["triggerPrice","stopPrice","takeProfitPrice","stopLossPrice"]);void 0!==u&&(c.triggerPrice=this.priceToPrecision(t,u));let g=this.safeString2(o,"trailingTriggerPrice","activatedPrice",this.numberToString(n)),m=this.safeString2(o,"trailingAmount","callbackValue"),p=this.safeString2(o,"trailingPercent","callbackRate"),v=void 0!==m,y=void 0!==p,w=v||y;if(w){if(void 0!==g&&(c.activatedPrice=this.priceToPrecision(t,g)),v)c.callbackValue=m;else if(y){let e=a.Y.stringDiv(p,"100");c.callbackRate=e}}o=this.omit(o,["clOrdID","clientOrderId","client_order_id","stopPrice","triggerPrice","takeProfitPrice","stopLossPrice","trailingTriggerPrice","trailingAmount","trailingPercent"]);let O=w||void 0!==u||void 0!==this.safeValue(o,"childOrders");void 0!==f?(c.client_order_id=f,d=O?await this.v3PrivatePutAlgoOrderClientClientOrderId(this.extend(c,o)):await this.v3PrivatePutOrderClientClientOrderId(this.extend(c,o))):(c.oid=e,d=O?await this.v3PrivatePutAlgoOrderOid(this.extend(c,o)):await this.v3PrivatePutOrderOid(this.extend(c,o)));let P=this.safeDict(d,"data",{});return this.parseOrder(P,h)}async cancelOrder(e,t,i={}){let r,a;let n=this.safeBool2(i,"trigger","stop",!1);if(i=this.omit(i,["trigger","stop"]),!n&&void 0===t)throw new s.ArgumentsRequired(this.id+" cancelOrder() requires a symbol argument");await this.loadMarkets(),void 0!==t&&(r=this.market(t));let o={},d=this.safeString2(i,"clOrdID","clientOrderId"),h=this.safeString(i,"client_order_id",d),c=void 0!==h;n?(o.order_id=e,a=await this.v3PrivateDeleteAlgoOrderOrderId(this.extend(o,i))):(o.symbol=r.id,c?(o.client_order_id=h,i=this.omit(i,["clOrdID","clientOrderId","client_order_id"]),a=await this.v1PrivateDeleteClientOrder(this.extend(o,i))):(o.order_id=e,a=await this.v1PrivateDeleteOrder(this.extend(o,i))));let l={symbol:t};return c?l.client_order_id=h:l.id=e,this.extend(this.parseOrder(a),l)}async cancelAllOrders(e,t={}){await this.loadMarkets();let i=this.safeBool2(t,"stop","trigger");if(t=this.omit(t,["stop","trigger"]),i)return await this.v3PrivateDeleteAlgoOrdersPending(t);if(void 0===e)throw new s.ArgumentsRequired(this.id+" cancelOrders() requires a symbol argument");let r={symbol:this.market(e).id},a=await this.v1PrivateDeleteOrders(this.extend(r,t));return[this.safeOrder(a)]}async cancelAllOrdersAfter(e,t={}){await this.loadMarkets();let i=await this.v1PrivatePostOrderCancelAllAfter(this.extend({trigger_after:e>0?e:0},t));return[this.safeOrder(i)]}async fetchOrder(e,t,i={}){let r;await this.loadMarkets();let s=void 0!==t?this.market(t):void 0,a=this.safeBool2(i,"stop","trigger");i=this.omit(i,["stop","trigger"]);let n={},o=this.safeString2(i,"clOrdID","clientOrderId");a?(n.oid=e,r=await this.v3PrivateGetAlgoOrderOid(this.extend(n,i))):o?(n.client_order_id=o,r=await this.v1PrivateGetClientOrderClientOrderId(this.extend(n,i))):(n.oid=e,r=await this.v1PrivateGetOrderOid(this.extend(n,i)));let d=this.safeDict(r,"data",r);return this.parseOrder(d,s)}async fetchOrders(e,t,i,r={}){let s,a;await this.loadMarkets();let n=!1;if([n,r]=this.handleOptionAndParams(r,"fetchOrders","paginate"),n)return await this.fetchPaginatedCallIncremental("fetchOrders",e,t,i,r,"page",500);let o={},d=this.safeBool2(r,"stop","trigger"),h=this.safeBool(r,"trailing",!1);r=this.omit(r,["stop","trailing","trigger"]),void 0!==e&&(s=this.market(e),o.symbol=s.id),void 0!==t&&(d||h?o.createdTimeStart=t:o.start_t=t),void 0!==i?o.size=i:o.size=500,d?o.algoType="stop":h&&(o.algoType="TRAILING_STOP"),a=d||h?await this.v3PrivateGetAlgoOrders(this.extend(o,r)):await this.v1PrivateGetOrders(this.extend(o,r));let c=this.safeValue(a,"data",a),l=this.safeList(c,"rows");return this.parseOrders(l,s,t,i)}async fetchOpenOrders(e,t,i,r={}){await this.loadMarkets();let s=this.extend(r,{status:"INCOMPLETE"});return await this.fetchOrders(e,t,i,s)}async fetchClosedOrders(e,t,i,r={}){await this.loadMarkets();let s=this.extend(r,{status:"COMPLETED"});return await this.fetchOrders(e,t,i,s)}parseTimeInForce(e){return this.safeString({ioc:"IOC",fok:"FOK",post_only:"PO"},e,void 0)}parseOrder(e,t){let i,r;let s=this.safeTimestampN(e,["timestamp","created_time","createdTime"]),a=this.safeStringN(e,["order_id","orderId","algoOrderId"]),n=this.omitZero(this.safeString2(e,"client_order_id","clientOrderId")),o=this.safeString(e,"symbol"),d=(t=this.safeMarket(o,t)).symbol,h=this.safeString2(e,"order_price","price"),c=this.safeString2(e,"order_quantity","quantity"),l=this.safeString2(e,"order_amount","amount"),f=this.safeStringLower2(e,"order_type","type"),u=this.safeValue2(e,"status","algoStatus"),g=this.safeStringLower(e,"side"),m=this.omitZero(this.safeValue2(e,"executed","totalExecutedQuantity")),p=this.omitZero(this.safeString2(e,"average_executed_price","averageExecutedPrice")),v=this.safeNumber2(e,"total_fee","totalFee"),y=this.safeString2(e,"fee_asset","feeAsset"),w=this.safeValue(e,"Transactions"),O=this.safeNumber(e,"triggerPrice"),P=this.safeValue(e,"childOrders");if(void 0!==P){let e=this.safeValue(P,0),t=this.safeValue(e,"childOrders",[]);if(t.length>0){let e=this.safeValue(t,0),s=this.safeValue(t,1);i=this.safeNumber(e,"triggerPrice"),r=this.safeNumber(s,"triggerPrice")}}let k=this.safeTimestamp2(e,"updatedTime","updated_time");return this.safeOrder({id:a,clientOrderId:n,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:void 0,lastUpdateTimestamp:k,status:this.parseOrderStatus(u),symbol:d,type:f,timeInForce:this.parseTimeInForce(f),postOnly:void 0,reduceOnly:this.safeBool(e,"reduce_only"),side:g,price:h,triggerPrice:O,takeProfitPrice:i,stopLossPrice:r,average:p,amount:c,filled:m,remaining:void 0,cost:l,trades:w,fee:{cost:v,currency:y},info:e},t)}parseOrderStatus(e){return void 0!==e?this.safeString({NEW:"open",FILLED:"closed",CANCEL_SENT:"canceled",CANCEL_ALL_SENT:"canceled",CANCELLED:"canceled",PARTIAL_FILLED:"open",REJECTED:"rejected",INCOMPLETE:"open",COMPLETED:"closed"},e,e):e}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let r={symbol:this.market(e).id};void 0!==t&&(t=Math.min(t,1e3),r.max_level=t);let s=await this.v1PublicGetOrderbookSymbol(this.extend(r,i)),a=this.safeInteger(s,"timestamp");return this.parseOrderBook(s,e,a,"bids","asks","price","quantity")}async fetchOHLCV(e,t="1m",i,r,s={}){let a;await this.loadMarkets();let n=this.market(e),o={symbol:n.id,type:this.safeString(this.timeframes,t,t)},d=void 0!==i;if(void 0!==r&&void 0!==i){let e=999e3*this.parseTimeframe(t);d=i<this.milliseconds()-e}d?o.start_time=i:void 0!==r&&(o.limit=Math.min(r,1e3)),d?(a=await this.v1PubGetHistKline(this.extend(o,s)),a=this.safeDict(a,"data")):a=await this.v1PublicGetKline(this.extend(o,s));let h=this.safeList(a,"rows",[]);return this.parseOHLCVs(h,n,t,i,r)}parseOHLCV(e,t){return[this.safeInteger(e,"start_timestamp"),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"volume")]}async fetchOrderTrades(e,t,i,r,s={}){let a;await this.loadMarkets(),void 0!==t&&(a=this.market(t));let n=await this.v1PrivateGetOrderOidTrades(this.extend({oid:e},s)),o=this.safeList(n,"rows",[]);return this.parseTrades(o,a,i,r,s)}async fetchMyTrades(e,t,i,r={}){let s;await this.loadMarkets();let a=!1;if([a,r]=this.handleOptionAndParams(r,"fetchMyTrades","paginate"),a)return await this.fetchPaginatedCallIncremental("fetchMyTrades",e,t,i,r,"page",500);let n={};void 0!==e&&(s=this.market(e),n.symbol=s.id),void 0!==t&&(n.start_t=t),[n,r]=this.handleUntilOption("end_t",n,r),void 0!==i?n.size=i:n.size=500;let o=await this.v1PrivateGetClientTrades(this.extend(n,r)),d=this.safeList(o,"rows",[]);return this.parseTrades(d,s,t,i,r)}async fetchAccounts(e={}){let t=await this.v1PrivateGetSubAccountAssets(e),i=this.safeList(t,"rows",[]);return this.parseAccounts(i,e)}parseAccount(e){let t=this.safeString(e,"account");return{info:e,id:this.safeString(e,"application_id"),name:t,code:void 0,type:"Main"===t?"main":"subaccount"}}async fetchBalance(e={}){await this.loadMarkets();let t=await this.v3PrivateGetBalances(e),i=this.safeDict(t,"data");return this.parseBalance(i)}parseBalance(e){let t={info:e},i=this.safeList(e,"holding",[]);for(let e=0;e<i.length;e++){let r=i[e],s=this.safeCurrencyCode(this.safeString(r,"token")),a=this.account();a.total=this.safeString(r,"holding"),a.free=this.safeString(r,"availableBalance"),t[s]=a}return this.safeBalance(t)}async fetchDepositAddress(e,t={}){await this.loadMarkets();let i=this.currency(e),r=this.defaultNetworkCodeForCurrency(e),s=this.safeString(t,"network",r);t=this.omit(t,"network");let a=s+"_"+i.code,n=await this.v1PrivateGetAssetDeposit(this.extend({token:a},t)),o=this.safeString(n,"extra"),d=this.safeString(n,"address");return this.checkAddress(d),{info:n,currency:e,network:s,address:d,tag:o}}async getAssetHistoryRows(e,t,i,r={}){let s;await this.loadMarkets();let a={};void 0!==e&&(s=this.currency(e),a.balance_token=s.id),void 0!==t&&(a.start_t=t),void 0!==i&&(a.pageSize=i);let n=this.safeString(r,"type");r=this.omit(r,"type"),void 0!==n&&(a.type=n);let o=await this.v1PrivateGetAssetHistory(this.extend(a,r));return[s,this.safeList(o,"rows",[])]}async fetchLedger(e,t,i,r={}){let[s,a]=await this.getAssetHistoryRows(e,t,i,r);return this.parseLedger(a,s,t,i,r)}parseLedgerEntry(e,t){let i=this.safeString(e,"token"),r=this.getCurrencyFromChaincode(i,t).code;t=this.safeCurrency(r,t);let s=this.safeNumber(e,"amount"),a=this.safeString(e,"token_side"),n=this.safeTimestamp(e,"created_time"),o=this.parseTokenAndFeeTemp(e,"fee_token","fee_amount");return this.safeLedgerEntry({info:e,id:this.safeString(e,"id"),currency:r,account:this.safeString(e,"account"),referenceAccount:void 0,referenceId:this.safeString(e,"tx_id"),status:this.parseTransactionStatus(this.safeString(e,"status")),amount:s,before:void 0,after:void 0,direction:"DEPOSIT"===a?"in":"out",timestamp:n,datetime:this.iso8601(n),type:this.parseLedgerEntryType(this.safeString(e,"type")),fee:o},t)}parseLedgerEntryType(e){return this.safeString({BALANCE:"transaction",COLLATERAL:"transfer"},e,e)}getCurrencyFromChaincode(e,t){if(void 0!==t);else{let i=e.split("_"),r=i.length,s=this.safeString(i,0),a=this.safeString(i,1,s);r>2&&(a+="_"+this.safeString(i,2)),t=this.safeCurrency(a)}return t}async fetchDeposits(e,t,i,r={}){return await this.fetchDepositsWithdrawals(e,t,i,this.extend({token_side:"DEPOSIT"},r))}async fetchWithdrawals(e,t,i,r={}){return await this.fetchDepositsWithdrawals(e,t,i,this.extend({token_side:"WITHDRAW"},r))}async fetchDepositsWithdrawals(e,t,i,r={}){let[s,a]=await this.getAssetHistoryRows(e,t,i,this.extend({type:"BALANCE"},r));return this.parseTransactions(a,s,t,i,r)}parseTransaction(e,t){let i=this.safeString(e,"token"),r=this.getCurrencyFromChaincode(i,t).code,s=this.safeStringLower(e,"token_side");"withdraw"===s&&(s="withdrawal");let a=this.parseTokenAndFeeTemp(e,"fee_token","fee_amount"),n=this.safeString(e,"target_address"),o=this.safeString(e,"source_address"),d=this.safeTimestamp(e,"created_time");return{info:e,id:this.safeString2(e,"id","withdraw_id"),txid:this.safeString(e,"tx_id"),timestamp:d,datetime:this.iso8601(d),address:void 0,addressFrom:o,addressTo:n,tag:this.safeString(e,"extra"),tagFrom:void 0,tagTo:void 0,type:s,amount:this.safeNumber(e,"amount"),currency:r,status:this.parseTransactionStatus(this.safeString(e,"status")),updated:this.safeTimestamp(e,"updated_time"),comment:void 0,internal:void 0,fee:a,network:void 0}}parseTransactionStatus(e){return this.safeString({NEW:"pending",CONFIRMING:"pending",PROCESSING:"pending",COMPLETED:"ok",CANCELED:"canceled"},e,e)}async transfer(e,t,i,r,s={}){await this.loadMarkets();let a=this.currency(e),n={token:a.id,amount:this.parseToNumeric(t),from_application_id:i,to_application_id:r},o=await this.v1PrivatePostAssetMainSubTransfer(this.extend(n,s)),d=this.parseTransfer(o,a),h=this.safeDict(this.options,"transfer",{});return this.safeBool(h,"fillResponseFromRequest",!0)&&(d.amount=t,d.fromAccount=i,d.toAccount=r),d}async fetchTransfers(e,t,i,r={}){let s={};void 0!==i&&(s.size=i),void 0!==t&&(s.start_t=t);let a=this.safeInteger(r,"until");r=this.omit(r,["until"]),void 0!==a&&(s.end_t=a);let n=await this.v1PrivateGetAssetMainSubTransferHistory(this.extend(s,r)),o=this.safeList(n,"rows",[]);return this.parseTransfers(o,void 0,t,i,r)}parseTransfer(e,t){let i;let r=this.safeString(e,"token"),s=this.getCurrencyFromChaincode(r,t).code,a=this.safeTimestamp(e,"created_time"),n=this.safeBool(e,"success");return void 0!==n&&(i=n?"ok":"failed"),{id:this.safeString(e,"id"),timestamp:a,datetime:this.iso8601(a),currency:s,amount:this.safeNumber(e,"amount"),fromAccount:this.safeString(e,"from_application_id"),toAccount:this.safeString(e,"to_application_id"),status:this.parseTransferStatus(this.safeString(e,"status",i)),info:e}}parseTransferStatus(e){return this.safeString({NEW:"pending",CONFIRMING:"pending",PROCESSING:"pending",COMPLETED:"ok",CANCELED:"canceled"},e,e)}async withdraw(e,t,i,r,a={}){[r,a]=this.handleWithdrawTagAndParams(r,a),await this.loadMarkets(),this.checkAddress(i);let n=this.currency(e),o={amount:t,address:i};void 0!==r&&(o.extra=r);let d=this.safeDict(this.options,"networks",{}),h=this.safeDict(n,"networks",{}),c=this.safeStringUpper(a,"network"),l=this.safeString(d,c,c),f=this.safeDict(h,l,{}),u=this.safeString(f,"id");if(void 0===u)throw new s.BadRequest(this.id+" withdraw() require network parameter");o.token=u;let g=await this.v1PrivatePostAssetWithdraw(this.extend(o,a));return this.parseTransaction(g,n)}async repayMargin(e,t,i,r={}){await this.loadMarkets(),void 0!==i&&(i=this.market(i).symbol);let s=this.currency(e),a={token:s.id,amount:this.currencyToPrecision(e,t)},n=await this.v1PrivatePostInterestRepay(this.extend(a,r)),o=this.parseMarginLoan(n,s);return this.extend(o,{amount:t,symbol:i})}parseMarginLoan(e,t){return{id:void 0,currency:this.safeCurrencyCode(void 0,t),amount:void 0,symbol:void 0,timestamp:void 0,datetime:void 0,info:e}}nonce(){return this.milliseconds()-this.options.timeDifference}sign(e,t="public",i="GET",r={},s,a){let n=t[0],d=t[1],h=this.implodeParams(e,r),c=this.implodeHostname(this.urls.api[d]);if(c+="/"+n+"/",r=this.omit(r,this.extractParams(e)),r=this.keysort(r),"public"===d)c+=d+"/"+h,Object.keys(r).length&&(c+="?"+this.urlencode(r));else if("pub"===d)c+=h,Object.keys(r).length&&(c+="?"+this.urlencode(r));else{if(this.checkRequiredCredentials(),"POST"===i&&("algo/order"===e||"order"===e)){if(!this.safeBool(this.options,"sandboxMode",!1)){let t=this.safeString(this.options,"brokerId","bc830de7-50f3-460b-9ee0-f430f83f9dad");e.indexOf("algo")>-1?r.brokerId=t:r.broker_id=t}r=this.keysort(r)}let t="",d=this.nonce().toString();if(c+=h,s={"x-api-key":this.apiKey,"x-api-timestamp":d},"v3"===n){if(t=d+i+"/"+n+"/"+h,"POST"===i||"PUT"===i||"DELETE"===i)t+=a=this.json(r);else if(Object.keys(r).length){let e=this.urlencode(r);c+="?"+e,t+="?"+e}s["content-type"]="application/json"}else t=this.urlencode(r),"POST"===i||"PUT"===i||"DELETE"===i?a=t:Object.keys(r).length&&(c+="?"+t),t+="|"+d,s["content-type"]="application/x-www-form-urlencoded";s["x-api-signature"]=this.hmac(this.encode(t),this.encode(this.secret),o.s)}return{url:c,method:i,body:a,headers:s}}handleErrors(e,t,i,r,s,a,n,o,d){if(!n)return;let h=this.safeBool(n,"success"),c=this.safeString(n,"code");if(!h){let e=this.id+" "+this.json(n);this.throwBroadlyMatchedException(this.exceptions.broad,a,e),this.throwExactlyMatchedException(this.exceptions.exact,c,e)}}parseIncome(e,t){let i=this.safeString(e,"symbol"),r=this.safeSymbol(i,t),s=this.safeString(e,"funding_fee"),n=this.safeCurrencyCode("USD"),o=this.safeString(e,"id"),d=this.safeTimestamp(e,"updated_time"),h=this.safeNumber(e,"funding_rate");return s="Pay"===this.safeString(e,"payment_type")?a.Y.stringNeg(s):s,{info:e,symbol:r,code:n,timestamp:d,datetime:this.iso8601(d),id:o,amount:this.parseNumber(s),rate:h}}async fetchFundingHistory(e,t,i,r={}){let s;await this.loadMarkets();let a=!1;if([a,r]=this.handleOptionAndParams(r,"fetchFundingHistory","paginate"),a)return await this.fetchPaginatedCallCursor("fetchFundingHistory",e,t,i,r,"page","page",1,500);let n={};void 0!==e&&(s=this.market(e),n.symbol=s.id),void 0!==t&&(n.start_t=t),void 0!==i?n.size=i:n.size=5e3;let o=await this.v1PrivateGetFundingFeeHistory(this.extend(n,r)),d=this.safeDict(o,"meta",{}),h=this.safeInteger(d,"current_page"),c=this.safeList(o,"rows",[]),l=c.length;if(l>0){let e=c[l-1];e.page=h,c[l-1]=e}return this.parseIncomes(c,s,t,i)}parseFundingRate(e,t){let i=this.safeString(e,"symbol");t=this.market(i);let r=this.safeInteger(e,"next_funding_time"),s=this.safeInteger(e,"est_funding_rate_timestamp"),a=this.safeInteger(e,"last_funding_rate_timestamp"),n=this.safeString(e,"est_funding_rate_interval");return{info:e,symbol:t.symbol,markPrice:void 0,indexPrice:void 0,interestRate:this.parseNumber("0"),estimatedSettlePrice:void 0,timestamp:s,datetime:this.iso8601(s),fundingRate:this.safeNumber(e,"est_funding_rate"),fundingTimestamp:r,fundingDatetime:this.iso8601(r),nextFundingRate:void 0,nextFundingTimestamp:void 0,nextFundingDatetime:void 0,previousFundingRate:this.safeNumber(e,"last_funding_rate"),previousFundingTimestamp:a,previousFundingDatetime:this.iso8601(a),interval:n+"h"}}async fetchFundingInterval(e,t={}){return await this.fetchFundingRate(e,t)}async fetchFundingRate(e,t={}){await this.loadMarkets();let i=this.market(e),r={symbol:i.id},s=await this.v1PublicGetFundingRateSymbol(this.extend(r,t));return this.parseFundingRate(s,i)}async fetchFundingRates(e,t={}){await this.loadMarkets(),e=this.marketSymbols(e);let i=await this.v1PublicGetFundingRates(t),r=this.safeList(i,"rows",[]);return this.parseFundingRates(r,e)}async fetchFundingRateHistory(e,t,i,r={}){await this.loadMarkets();let s=!1;if([s,r]=this.handleOptionAndParams(r,"fetchFundingRateHistory","paginate"),s)return await this.fetchPaginatedCallIncremental("fetchFundingRateHistory",e,t,i,r,"page",25);let a={};if(void 0!==e){let t=this.market(e);e=t.symbol,a.symbol=t.id}void 0!==t&&(a.start_t=this.parseToInt(t/1e3)),[a,r]=this.handleUntilOption("end_t",a,r,.001);let n=await this.v1PublicGetFundingRateHistory(this.extend(a,r)),o=this.safeList(n,"rows"),d=[];for(let e=0;e<o.length;e++){let t=o[e],i=this.safeString(t,"symbol"),r=this.safeInteger(t,"funding_rate_timestamp");d.push({info:t,symbol:this.safeSymbol(i),fundingRate:this.safeNumber(t,"funding_rate"),timestamp:r,datetime:this.iso8601(r)})}let h=this.sortBy(d,"timestamp");return this.filterBySymbolSinceLimit(h,e,t,i)}async setPositionMode(e,t,i={}){return await this.v1PrivatePostClientPositionMode(this.extend({position_mode:e?"HEDGE_MODE":"ONE_WAY"},i))}async fetchLeverage(e,t={}){let i;await this.loadMarkets();let r=this.market(e);if(r.spot)i=await this.v3PrivateGetAccountinfo(t);else if(r.swap){let e;let s={symbol:r.id};[e,t]=this.handleMarginModeAndParams("fetchLeverage",t,"cross"),s.margin_mode=this.encodeMarginMode(e),i=await this.v1PrivateGetClientFuturesLeverage(this.extend(s,t))}else throw new s.NotSupported(this.id+" fetchLeverage() is not supported for "+r.type+" markets");let a=this.safeDict(i,"data",{});return this.parseLeverage(a,r)}parseLeverage(e,t){let i=this.safeString(e,"symbol");t=this.safeMarket(i,t);let r=this.safeStringLower(e,"default_margin_mode"),s=this.safeInteger(e,"leverage"),a=s,n=s,o=this.safeList(e,"details",[]);for(let e=0;e<o.length;e++){let t=this.safeDict(o,e,{}),i=this.safeInteger(t,"leverage"),r=this.safeString(t,"position_side");"BOTH"===r?(a=i,n=i):"LONG"===r?a=i:"SHORT"===r&&(n=i)}return{info:e,symbol:t.symbol,marginMode:r,longLeverage:a,shortLeverage:n}}async setLeverage(e,t,i={}){let r;await this.loadMarkets();let a={leverage:e};if(void 0!==t&&(r=this.market(t)),void 0===t||r.spot)return await this.v1PrivatePostClientLeverage(this.extend(a,i));if(r.swap){let e;return a.symbol=r.id,[e,i]=this.handleMarginModeAndParams("fetchLeverage",i,"cross"),a.margin_mode=this.encodeMarginMode(e),await this.v1PrivatePostClientFuturesLeverage(this.extend(a,i))}throw new s.NotSupported(this.id+" fetchLeverage() is not supported for "+r.type+" markets")}async addMargin(e,t,i={}){return await this.modifyMarginHelper(e,t,"ADD",i)}async reduceMargin(e,t,i={}){return await this.modifyMarginHelper(e,t,"REDUCE",i)}async modifyMarginHelper(e,t,i,r={}){await this.loadMarkets();let s={symbol:this.market(e).id,adjust_token:"USDT",adjust_amount:t,action:i};return await this.v1PrivatePostClientIsolatedMargin(this.extend(s,r))}async fetchPosition(e,t={}){await this.loadMarkets();let i=this.market(e),r={symbol:i.id},s=await this.v1PrivateGetPositionSymbol(this.extend(r,t));return this.parsePosition(s,i)}async fetchPositions(e,t={}){await this.loadMarkets();let i=await this.v3PrivateGetPositions(t),r=this.safeDict(i,"data",{}),s=this.safeList(r,"positions",[]);return this.parsePositions(s,e)}parsePosition(e,t){let i;let r=this.safeString(e,"symbol");t=this.safeMarket(r,t);let s=this.safeString(e,"holding");i=a.Y.stringGt(s,"0")?"long":"short";let n=this.safeString(t,"contractSize"),o=this.safeString2(e,"markPrice","mark_price"),d=this.safeTimestamp(e,"timestamp"),h=this.safeString2(e,"averageOpenPrice","average_open_price"),c=a.Y.stringSub(o,h),l=a.Y.stringMul(c,s);s=a.Y.stringAbs(s);let f=a.Y.stringMul(s,o),u=this.safeString(e,"positionSide");return this.safePosition({info:e,id:void 0,symbol:this.safeString(t,"symbol"),timestamp:d,datetime:this.iso8601(d),lastUpdateTimestamp:void 0,initialMargin:void 0,initialMarginPercentage:void 0,maintenanceMargin:void 0,maintenanceMarginPercentage:void 0,entryPrice:this.parseNumber(h),notional:this.parseNumber(f),leverage:this.safeNumber(e,"leverage"),unrealizedPnl:this.parseNumber(l),contracts:this.parseNumber(s),contractSize:this.parseNumber(n),marginRatio:void 0,liquidationPrice:this.safeNumber2(e,"estLiqPrice","est_liq_price"),markPrice:this.parseNumber(o),lastPrice:void 0,collateral:void 0,marginMode:this.safeStringLower2(e,"marginMode","margin_mode"),side:i,percentage:void 0,hedged:"BOTH"!==u,stopLossPrice:void 0,takeProfitPrice:void 0})}async fetchConvertQuote(e,t,i,r={}){await this.loadMarkets();let s={sellToken:e.toUpperCase(),buyToken:t.toUpperCase(),sellQuantity:this.numberToString(i)},a=await this.v3PrivateGetConvertRfq(this.extend(s,r)),n=this.safeDict(a,"data",{}),o=this.safeString(n,"sellToken",e),d=this.currency(o),h=this.safeString(n,"buyToken",t),c=this.currency(h);return this.parseConversion(n,d,c)}async createConvertTrade(e,t,i,r,s={}){await this.loadMarkets();let a=await this.v3PrivatePostConvertRft(this.extend({quoteId:e},s)),n=this.safeDict(a,"data",{});return this.parseConversion(n)}async fetchConvertTrade(e,t,i={}){let r,s;await this.loadMarkets();let a=await this.v3PrivateGetConvertTrade(this.extend({quoteId:e},i)),n=this.safeDict(a,"data",{}),o=this.safeString(n,"sellAsset"),d=this.safeString(n,"buyAsset");return void 0!==o&&(r=this.currency(o)),void 0!==d&&(s=this.currency(d)),this.parseConversion(n,r,s)}async fetchConvertTradeHistory(e,t,i,r={}){await this.loadMarkets();let s={};[s,r]=this.handleUntilOption("endTime",s,r),void 0!==t&&(s.startTime=t),void 0!==i&&(s.size=i);let a=await this.v3PrivateGetConvertTrades(this.extend(s,r)),n=this.safeDict(a,"data",{}),o=this.safeList(n,"tradeVos",[]);return this.parseConversions(o,e,"sellAsset","buyAsset",t,i)}parseConversion(e,t,i){let r=this.safeInteger2(e,"expireTimestamp","createdTime"),s=this.safeString2(e,"sellToken","buyAsset"),a=this.safeCurrencyCode(s,t),n=this.safeString2(e,"buyToken","sellAsset"),o=this.safeCurrencyCode(n,i);return{info:e,timestamp:r,datetime:this.iso8601(r),id:this.safeString(e,"quoteId"),fromCurrency:a,fromAmount:this.safeNumber2(e,"sellQuantity","sellAmount"),toCurrency:o,toAmount:this.safeNumber2(e,"buyQuantity","buyAmount"),price:this.safeNumber(e,"buyPrice"),fee:void 0}}async fetchConvertCurrencies(e={}){await this.loadMarkets();let t=await this.v3PrivateGetConvertAssetInfo(e),i={},r=this.safeList(t,"rows",[]);for(let e=0;e<r.length;e++){let t=r[e],s=this.safeString(t,"token"),a=this.safeCurrencyCode(s);i[a]={info:t,id:s,code:a,networks:void 0,type:void 0,name:void 0,active:void 0,deposit:void 0,withdraw:void 0,fee:void 0,precision:this.safeNumber(t,"tick"),limits:{amount:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0},deposit:{min:void 0,max:void 0}},created:this.safeTimestamp(t,"createdTime")}}return i}defaultNetworkCodeForCurrency(e){let t=Object.keys(this.currency(e).networks);for(let e=0;e<t.length;e++){let i=t[e];if("ETH"===i)return i}return this.safeValue(t,0)}setSandboxMode(e){super.setSandboxMode(e),this.options.sandboxMode=e}}}}]);